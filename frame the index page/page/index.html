<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<META HTTP-EQUIV="pragma" CONTENT="no-cache"> 
	<meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <!-- <link rel="stylesheet" href="../../base.css" /> -->
	<title>试验框架加载</title>
	<style>
		.slider,.linkicon,.banner{border: 1px solid red;}
		img{width:100%;}
	</style>
</head>
<body>
	<header></header>
	<div class="container"  >
		<div class="slider" id="slider" setscale="2.666667" setH="240" setW="640">
			<img datasrc="../img/slider.jpg"  alt="slider">
		</div>
		<div style="width:100px;">
			<div class="linkicon" setscale="1" setscalew="640">
				<img datasrc="../img/icon.jpg" alt="icon">
			</div>
		</div>
		<div class="banner" id="banner" setH="120" setW="640">
			<img datasrc="../img/banner.jpg" alt="banner">
		</div>
	</div>
	<footer></footer>

	 <script src="https://cdn.bootcss.com/jquery/3.0.0-alpha1/jquery.min.js"></script>

	<script>
	// function getDeviceWidth () {
	// 	var deviceWidth = document.body.clientWidth;
	// 	alert(deviceWidth);
	// }
	// getDeviceWidth();
	// function getParentsWidth (id) {
	// 	var pWidth = document.getElementById(id).parentNode.offsetWidth;
	// 	return pWidth;
	// };
	// function getAttr (id,attrName) {
	// 	var attr = document.getElementById(id).getAttribute(attrName);
	// 	return attr;
	// };
	// function setHeight (id,width,dataH) {
	// 	var goal = document.getElementById(id);
	// 	goal.style.height = width/dataH
	// };
	// function getScale (id,attrW,attrH) {
	// 	var w = getAttr(id,attrW);
	// 	var h = getAttr(id,attrH);
	// 	var scale = w/h;
	// 	return scale;
	// };
	// function setHeight (id) {
	// 	var pW = getParentsWidth(id);
	// 	var scale = getScale("slider","setW","setH");
	// 	var goal = document.getElementById(id);
	// 	goal.style.height = pW/scale+"px";
	// };
	// var body = document.getElementById("body");
	// body.onResize(function() {
		// setHeight("slider");
		// setHeight("banner");
		// console.log("窗口重置");
	// });
	// getParentsWidth("slider");
	// window.resize(function(){
		// setHeight("slider");
		// getParentsWidth("slider");
		// console.log("重置窗口");
	// });
	// function resize (id,attrH,attrW) {
		// var width = getParentsWidth(id);
		// var dataH = getAttr(id,attH);
		// var dataW = getAttr(id,attrW);
		// alert(width+","+dataH);

	// }

	// showAttr();

	$(function(){
		function getscale (goal) {
			alert(scale);
		};
		function resize () {
			setscale("slider");
			setscale("linkicon");
			setscale("banner");
		};resize();
		function setscale (goal) {
			var $this = $("."+goal);
			var scalew = $("."+goal).attr("setscalew"); //getscale
			var scale = 640/scalew;
			var boxWidth = $this.width();
			console.log($this,scale);
			$this.height(boxWidth/scale);
			console.log(boxWidth);

		}
		function setImgSrc (goal) {
			var img = $("."+goal),
				src = img.attr("datasrc");
				console.log(src);
				img.attr("src",src);
		};
		$(window).resize(function(){
			resize();
		})
		// getscale("slider")
	
		// getscale("slider img");
		setTimeout(function(){
			alert("start load img");
			setImgSrc("slider img");
			setImgSrc("linkicon img");
			setImgSrc("banner img");
		},100)

		
	});
	</script>
</body>
</html>