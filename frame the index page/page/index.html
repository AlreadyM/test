<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<META HTTP-EQUIV="pragma" CONTENT="no-cache"> 
	<meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../../base.css" />
	<title>试验框架加载</title>
	<style>
		.slider,.linkicon,.banner{border: 1px solid red;}
		img{width:100%;}
	</style>
</head>
<body>
	<header></header>
	<div class="container">
		<div class="slider" setscale="2.666667" setscalew="240">
			<img datasrc="../img/slider.jpg"  alt="slider">
		</div>
		<div style="width:100px;">
			<div class="linkicon" setscale="1" setscalew="640">
				<img datasrc="../img/icon.jpg" alt="icon">
			</div>
		</div>
		<div class="banner" setscaleh="640" setscalew="360">
			<img datasrc="../img/banner.jpg" alt="banner">
		</div>
	</div>
	<footer></footer>
	<script src="https://cdn.bootcss.com/jquery/3.0.0-alpha1/jquery.min.js"></script>
	<script>
	$(function(){
		// function getscale (goal) {
			
		// 	alert(scale);
		// };
		function resize () {
			setscale("slider");
			setscale("linkicon");
			setscale("banner");
		};resize();
		function setscale (goal) {
			var $this = $("."+goal);
			var scalew = $("."+goal).attr("setscalew"); //getscale
			var scale = 640/scalew;
			var boxWidth = $this.width();
			console.log($this,scale);
			$this.height(boxWidth/scale);
			console.log(boxWidth);

		}
		function setImgSrc (goal) {
			var img = $("."+goal),
				src = img.attr("datasrc");
				console.log(src);
				img.attr("src",src);
		};
		$(window).resize(function(){
			resize();
		})
		// getscale("slider")
	
		// getscale("slider img");
		setTimeout(function(){
			alert("start load img");
			setImgSrc("slider img");
			setImgSrc("linkicon img");
			setImgSrc("banner img");
		},100)

		
	});
	</script>
</body>
</html>